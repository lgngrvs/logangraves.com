{% extends "base.html" %}
{% block title %}Index by date â€¢ Logan Graves{% endblock %}
{% block head_items %}<link rel="stylesheet" href="/static/css/index.css" type="text/css">{% endblock %}
{% block content %}
    <h1>Posts by date</h1>
    <br class="desktop-only">
    <table id="index-table">
    {% for post in posts %}
        {% set link_location = url_for('show_post_slug', slug=post['slug']) %}
        <tr class="index-row" data-link-location="{{ link_location }}">


            {% set post_image = "static/images/" + post['slug'] + ".webp" %}
            {% if file_exists(post_image) %}
            <td class="index-img-container-container mobile-only">

                <div class="index-img-container">
                    <img class="index-img" src="static/images/{{ post['slug'] }}.webp">
                </div>
            </td>

            <td class="index-text-container">
                <p>
                    <a class="index-post-title-link" href="{{ url_for('show_post_slug', slug=post['slug']) }}">{{ post['title'] }}</a>
                </p>
                <span class="index-post-description-new">{{ post['description']|safe }}</span>
                <div class="tags">
                    {% if post["tags"] %} 
                        {% for tag in post["tags_list"] %} 
                            <span class="index-post-tag"><a class="index-post-tag-link" href="/tag/{{ tag }}">#{{ tag }}</a></span>
                        {% endfor %} 
                    {% endif %}
                </div>
                <p class="index-post-date"> {{ post['date_formatted'] }} </p>
            </td>

            <td class="index-img-container-container desktop-only">
                <div class="index-img-container">
                    <img class="index-img" src="static/images/{{ post['slug'] }}.webp">
                </div>
            </td>


            {% else %}

            <td colspan="2" class="index-text-container">
                <p>
                    <a class="index-post-title-link" href="{{ url_for('show_post_slug', slug=post['slug']) }}">{{ post['title'] }}</a>
                </p>
                <span class="index-post-description-new">{{ post['description']|safe }}</span>
                <div class="tags">
                    {% if post["tags"] %} 
                        {% for tag in post["tags_list"] %} 
                            <span class="index-post-tag"><a class="index-post-tag-link" href="/tag/{{ tag }}">#{{ tag }}</a></span>
                        {% endfor %} 
                    {% endif %}
                </div>
                <p class="index-post-date"> {{ post['date_formatted'] }} </p>
            </td>
            {% endif %}

            
        </tr>
    {% endfor %}
    </table>
    <script type="text/javascript" src="/static/js/index.js"></script>
{% endblock %}
